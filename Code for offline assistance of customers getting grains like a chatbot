cat > App.js << 'EOF'
import React, { useState, useEffect } from 'react';
import { 
  StyleSheet, 
  View, 
  FlatList, 
  SafeAreaView,
  StatusBar,
  TouchableOpacity,
  ActivityIndicator,
  Text
} from 'react-native';
import * as Speech from 'expo-speech';
import { Audio } from 'expo-av';

// SmartGreenATM Q&A Data
const qaData = [
  {
    "question": "what is smart green atm",
    "variations": ["what is this", "tell me about smart green atm", "explain smart green atm", "what does it do"],
    "answer": "SmartGreenATM is an AI-powered grain dispenser that automates ration distribution using sensors and artificial intelligence.",
    "category": "General"
  },
  {
    "question": "how does it work",
    "variations": ["how it works", "working process", "explain working", "operation"],
    "answer": "It uses load sensors for weight measurement and proximity sensors for container detection. AI controls the dispensing in real-time for accurate distribution.",
    "category": "Technical"
  },
  {
    "question": "which grains can it dispense",
    "variations": ["what grains", "types of grains", "which foods", "grain types"],
    "answer": "It can dispense rice, wheat, pulses, and other similar grains through separate compartments.",
    "category": "Technical"
  },
  {
    "question": "how much does it cost",
    "variations": ["price", "cost", "how expensive", "what is the price"],
    "answer": "The prototype costs around 5000 to 7000 units for materials and components.",
    "category": "Business"
  },
  {
    "question": "is it portable",
    "variations": ["can i move it", "is it movable", "portability", "easy to carry"],
    "answer": "Yes, the design is compact and easy to move between locations.",
    "category": "Features"
  },
  {
    "question": "power consumption",
    "variations": ["how much power", "electricity usage", "power needed", "energy consumption"],
    "answer": "It runs on 12V DC with very low power usage, making it suitable for rural areas.",
    "category": "Technical"
  },
  {
    "question": "how fast does it work",
    "variations": ["speed", "how quick", "dispensing speed", "time taken"],
    "answer": "It can dispense approximately 1 to 2 kilograms per minute and serve 50 people within 30-40 minutes.",
    "category": "Performance"
  },
  {
    "question": "can it work offline",
    "variations": ["without internet", "offline operation", "internet required", "online needed"],
    "answer": "Yes, the AI logic works completely without internet. Internet is only optional for remote monitoring.",
    "category": "Features"
  },
  {
    "question": "main benefits",
    "variations": ["advantages", "benefits", "why use it", "what are the benefits"],
    "answer": "It ensures fair distribution, reduces corruption, saves time, and minimizes grain wastage through precise measurements.",
    "category": "Benefits"
  },
  {
    "question": "maintenance required",
    "variations": ["how to maintain", "cleaning", "upkeep", "what maintenance"],
    "answer": "Just regular cleaning of sensors and refilling of grains. The system is designed for minimal maintenance.",
    "category": "Operation"
  },
  {
    "question": "is it accurate",
    "variations": ["accuracy", "how precise", "measurement accuracy", "is it exact"],
    "answer": "Yes, it's accurate within 5 grams per measurement through continuous sensor monitoring and AI adjustments.",
    "category": "Technical"
  },
  {
    "question": "can it prevent theft",
    "variations": ["security", "theft prevention", "pilferage", "stealing prevention"],
    "answer": "Yes, automated dispensing and AI monitoring significantly reduce pilferage and unauthorized access.",
    "category": "Security"
  },
  {
    "question": "rural area operation",
    "variations": ["village use", "rural areas", "without electricity", "remote villages"],
    "answer": "Yes, it's designed specifically for rural areas with limited electricity and can run on battery backup for 4-6 hours.",
    "category": "Features"
  }
];

export default function App() {
  const [isListening, setIsListening] = useState(false);
  const [conversation, setConversation] = useState([]);
  const [isSpeaking, setIsSpeaking] = useState(false);
  const [isProcessing, setIsProcessing] = useState(false);
  const [recording, setRecording] = useState(null);

  useEffect(() => {
    setupAudio();
  }, []);

  const setupAudio = async () => {
    await Audio.requestPermissionsAsync();
    await Audio.setAudioModeAsync({
      allowsRecordingIOS: false,
      playsInSilentModeIOS: true,
      staysActiveInBackground: false,
    });
  };

  const findAnswer = (spokenText) => {
    const text = spokenText.toLowerCase().trim();
    console.log("Searching for:", text);
    
    // Direct match
    let found = qaData.find(item => 
      item.question.toLowerCase().includes(text) || 
      text.includes(item.question.toLowerCase())
    );
    
    // Check variations
    if (!found) {
      found = qaData.find(item => 
        item.variations.some(variation => 
          text.includes(variation.toLowerCase()) || 
          variation.toLowerCase().includes(text)
        )
      );
    }
    
    // Keyword matching for better recognition
    if (!found) {
      const keywords = {
        'cost': 'how much does it cost',
        'price': 'how much does it cost', 
        'work': 'how does it work',
        'operation': 'how does it work',
        'grains': 'which grains can it dispense',
        'rice': 'which grains can it dispense',
        'wheat': 'which grains can it dispense',
        'power': 'power consumption',
        'electricity': 'power consumption',
        'portable': 'is it portable',
        'move': 'is it portable',
        'offline': 'can it work offline',
        'internet': 'can it work offline',
        'benefits': 'main benefits',
        'advantages': 'main benefits',
        'maintenance': 'maintenance required',
        'cleaning': 'maintenance required',
        'accurate': 'is it accurate',
        'precision': 'is it accurate',
        'theft': 'can it prevent theft',
        'security': 'can it prevent theft',
        'rural': 'rural area operation',
        'village': 'rural area operation'
      };

      for (const [keyword, question] of Object.entries(keywords)) {
        if (text.includes(keyword)) {
          found = qaData.find(item => item.question === question);
          if (found) break;
        }
      }
    }

    return found || {
      question: text,
      answer: "I'm not sure about that. Try asking about: what it is, how it works, cost, grains, power usage, portability, or offline operation.",
      category: "Help"
    };
  };

  const startListening = async () => {
    try {
      setIsListening(true);
      setIsProcessing(true);
      
      // Show listening state for 3 seconds
      setTimeout(() => {
        // SIMULATED VOICE INPUT - Replace this with real speech recognition
        // For now, we'll use manual input simulation
        const userQuestion = getManualInput();
        if (userQuestion) {
          processSpokenText(userQuestion);
        } else {
          // If no manual input, use demo questions
          const demoQuestions = [
            "What is Smart Green ATM?",
            "How does it work?",
            "What is the cost?",
            "Is it portable?",
            "Can it work offline?",
            "Power consumption",
            "How fast does it work?",
            "Main benefits"
          ];
          const randomQuestion = demoQuestions[Math.floor(Math.random() * demoQuestions.length)];
          processSpokenText(randomQuestion);
        }
      }, 3000);
      
    } catch (error) {
      console.error('Error starting listening:', error);
      setIsListening(false);
      setIsProcessing(false);
    }
  };

  // Manual input simulation - YOU CAN CHANGE THESE QUESTIONS
  const getManualInput = () => {
    const manualQuestions = [
      "What is Smart Green ATM?",
      "How much does it cost?",
      "Is it portable?",
      "Can it work offline?",
      "Which grains can it dispense?",
      "How does it work?",
      "Power consumption",
      "Main benefits"
    ];
    
    // Return null to use random questions, or specify a question:
    return null; // Change to: return "Your question here";
  };

  const processSpokenText = (text) => {
    setIsProcessing(true);
    
    setTimeout(() => {
      const result = findAnswer(text);
      
      const newConversation = [
        ...conversation,
        { type: 'question', text: text, time: new Date() },
        { type: 'answer', text: result.answer, category: result.category, time: new Date() }
      ];
      
      setConversation(newConversation);
      setIsListening(false);
      setIsProcessing(false);
      
      // Speak the answer
      speakAnswer(result.answer);
    }, 1000);
  };

  const speakAnswer = (text) => {
    setIsSpeaking(true);
    Speech.speak(text, {
      language: 'en',
      pitch: 1.0,
      rate: 0.9,
      onDone: () => setIsSpeaking(false),
      onStopped: () => setIsSpeaking(false),
      onError: () => setIsSpeaking(false),
    });
  };

  const stopSpeaking = () => {
    Speech.stop();
    setIsSpeaking(false);
  };

  // MANUAL QUESTION BUTTONS - Tap to ask specific questions
  const askQuestion = (question) => {
    processSpokenText(question);
  };

  const renderMessage = ({ item }) => (
    <View style={[
      styles.messageCard, 
      item.type === 'question' ? styles.questionCard : styles.answerCard
    ]}>
      {item.type === 'answer' && (
        <View style={[styles.category, {backgroundColor: getCategoryColor(item.category)}]}>
          <Text style={styles.categoryText}>{item.category}</Text>
        </View>
      )}
      <Text style={styles.messageText}>{item.text}</Text>
      <Text style={styles.timeText}>
        {item.time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
      </Text>
    </View>
  );

  const getCategoryColor = (category) => {
    const colors = {
      'Technical': '#4CAF50',
      'General': '#2196F3',
      'Business': '#9C27B0',
      'Features': '#607D8B',
      'Performance': '#F44336',
      'Benefits': '#009688',
      'Operation': '#FF5722',
      'Security': '#795548',
      'Help': '#FF9800',
      'Unknown': '#757575'
    };
    return colors[category] || '#757575';
  };

  return (
    <SafeAreaView style={styles.container}>
      <StatusBar backgroundColor="#2E7D32" />
      
      {/* Header */}
      <View style={styles.header}>
        <Text style={styles.headerTitle}>SmartGreenATM Voice Bot</Text>
        <Text style={styles.headerSubtitle}>Tap buttons or microphone to ask</Text>
      </View>

      {/* Quick Question Buttons */}
      <View style={styles.quickQuestions}>
        <Text style={styles.quickQuestionsTitle}>Quick Questions:</Text>
        <View style={styles.questionButtons}>
          <TouchableOpacity style={styles.qButton} onPress={() => askQuestion("What is Smart Green ATM?")}>
            <Text style={styles.qButtonText}>What is it?</Text>
          </TouchableOpacity>
          <TouchableOpacity style={styles.qButton} onPress={() => askQuestion("How much does it cost?")}>
            <Text style={styles.qButtonText}>Cost?</Text>
          </TouchableOpacity>
          <TouchableOpacity style={styles.qButton} onPress={() => askQuestion("Is it portable?")}>
            <Text style={styles.qButtonText}>Portable?</Text>
          </TouchableOpacity>
          <TouchableOpacity style={styles.qButton} onPress={() => askQuestion("Can it work offline?")}>
            <Text style={styles.qButtonText}>Offline?</Text>
          </TouchableOpacity>
        </View>
      </View>

      {/* Conversation History */}
      <View style={styles.conversationContainer}>
        {conversation.length === 0 ? (
          <View style={styles.welcomeContainer}>
            <Text style={styles.welcomeTitle}>SmartGreenATM Assistant ðŸŽ¤</Text>
            <Text style={styles.welcomeText}>
              Tap any question button above or use the microphone below!
            </Text>
          </View>
        ) : (
          <FlatList
            data={conversation}
            renderItem={renderMessage}
            keyExtractor={(item, index) => index.toString()}
            contentContainerStyle={styles.conversationList}
          />
        )}
      </View>

      {/* Voice Control Section */}
      <View style={styles.voiceContainer}>
        {isProcessing && (
          <View style={styles.processingContainer}>
            <ActivityIndicator size="large" color="#2E7D32" />
            <Text style={styles.processingText}>
              {isListening ? "Listening... Speak now!" : "Processing your question..."}
            </Text>
          </View>
        )}

        {isSpeaking && (
          <TouchableOpacity style={styles.stopButton} onPress={stopSpeaking}>
            <Text style={styles.stopButtonText}>Stop Speaking</Text>
          </TouchableOpacity>
        )}

        <TouchableOpacity
          style={[
            styles.micButton,
            isListening && styles.listeningButton,
            isSpeaking && styles.speakingButton
          ]}
          onPress={isListening || isSpeaking ? stopSpeaking : startListening}
          disabled={isProcessing}
        >
          <Text style={styles.micButtonText}>
            {isListening ? 'ðŸŽ¤ Listening...' : isSpeaking ? 'ðŸ”Š Speaking' : 'ðŸŽ¤ Tap to Speak'}
          </Text>
        </TouchableOpacity>

        <Text style={styles.hintText}>
          {isListening ? "Speak your question clearly..." : 
           isSpeaking ? "Speaking the answer..." :
           "Tap microphone or use question buttons above"}
        </Text>
      </View>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  header: {
    backgroundColor: '#2E7D32',
    padding: 16,
    paddingTop: 40,
  },
  headerTitle: {
    color: 'white',
    fontSize: 20,
    fontWeight: 'bold',
  },
  headerSubtitle: {
    color: 'white',
    fontSize: 14,
    opacity: 0.8,
  },
  quickQuestions: {
    backgroundColor: 'white',
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#e0e0e0',
  },
  quickQuestionsTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    marginBottom: 8,
    color: '#2E7D32',
  },
  questionButtons: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
  },
  qButton: {
    backgroundColor: '#E8F5E8',
    paddingVertical: 8,
    paddingHorizontal: 12,
    borderRadius: 20,
    marginVertical: 4,
    minWidth: '23%',
    alignItems: 'center',
  },
  qButtonText: {
    color: '#2E7D32',
    fontSize: 12,
    fontWeight: 'bold',
    textAlign: 'center',
  },
  conversationContainer: {
    flex: 1,
    padding: 16,
  },
  conversationList: {
    paddingBottom: 20,
  },
  welcomeContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 20,
  },
  welcomeTitle: {
    fontSize: 22,
    fontWeight: 'bold',
    color: '#2E7D32',
    textAlign: 'center',
    marginBottom: 20,
  },
  welcomeText: {
    fontSize: 16,
    color: '#666',
    textAlign: 'center',
    lineHeight: 22,
  },
  messageCard: {
    marginVertical: 8,
    borderRadius: 16,
    padding: 16,
    elevation: 2,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
  },
  questionCard: {
    alignSelf: 'flex-end',
    backgroundColor: '#E3F2FD',
    marginLeft: 50,
  },
  answerCard: {
    alignSelf: 'flex-start',
    backgroundColor: 'white',
    marginRight: 50,
  },
  messageText: {
    fontSize: 16,
    lineHeight: 22,
  },
  timeText: {
    fontSize: 12,
    color: '#888',
    marginTop: 8,
    textAlign: 'right',
  },
  category: {
    alignSelf: 'flex-start',
    paddingHorizontal: 12,
    paddingVertical: 4,
    borderRadius: 16,
    marginBottom: 8,
  },
  categoryText: {
    color: 'white',
    fontSize: 10,
    fontWeight: 'bold',
  },
  voiceContainer: {
    padding: 20,
    backgroundColor: 'white',
    borderTopLeftRadius: 20,
    borderTopRightRadius: 20,
    elevation: 8,
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: -2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
  },
  processingContainer: {
    alignItems: 'center',
    marginBottom: 15,
  },
  processingText: {
    marginTop: 8,
    color: '#2E7D32',
    fontSize: 14,
    textAlign: 'center',
  },
  micButton: {
    backgroundColor: '#2E7D32',
    paddingVertical: 15,
    paddingHorizontal: 30,
    borderRadius: 30,
    elevation: 4,
    minWidth: 200,
    alignItems: 'center',
  },
  listeningButton: {
    backgroundColor: '#FF5722',
  },
  speakingButton: {
    backgroundColor: '#2196F3',
  },
  micButtonText: {
    color: 'white',
    fontSize: 18,
    fontWeight: 'bold',
  },
  stopButton: {
    backgroundColor: '#F44336',
    paddingVertical: 8,
    paddingHorizontal: 16,
    borderRadius: 15,
    marginBottom: 10,
  },
  stopButtonText: {
    color: 'white',
    fontSize: 14,
    fontWeight: 'bold',
  },
  hintText: {
    marginTop: 12,
    color: '#666',
    fontSize: 14,
    textAlign: 'center',
    fontStyle: 'italic',
  },
});
EOF
